<div class="row">
    <div class="large-6 medium-6 small-6 columns">
        <span style="font-size:0.8em;float:left;">
            <%= page_entries_info @disruptions %>
        </span>
    </div>
</div>

<div class="row">
    <div class="large-12 columns">
        <table id="disruptionsTable" width="100%">
            <thead>
            <tr>
                <th width="20"><%= sortable("route", "Route").html_safe %></th>
                <th><%= sortable("run", "Direction").html_safe %></th>
                <th>
                    <%= sortable("fromStopLBSLCode", "From").html_safe %>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Stop <strong>from</strong> which disruption is observed.">
                               <sup>*</sup>
                    </span>
                </th>
                <th>
                    <%= sortable("toStopLBSLCode", "To").html_safe %>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Stop <strong>to</strong> which disruption is observed.">
                           <sup>*</sup>
                    </span>
                </th>
                <th width="110">
                    <%= sortable("delayInSeconds", "Delay").html_safe %>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="WMA (Weighted moving average) delay observed across the given section(in minutes).">
                         <sup>*</sup>
                    </span>
                </th>
                <th width="110">
                    <%= sortable("routeTotalDelayInSeconds", "Total delay").html_safe %>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Total delay observed across the route in the given direction(in minutes).">
                        <sup>*</sup>
                    </span>
                </th>
                <th>
                    <%= sortable("firstDetectedAt", "Detected").html_safe %>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Time when the system has first detected the disruption.">
                         <sup>*</sup>
                    </span>
                </th>
                <th>
                    <%= sortable("clearedAt", "Cleared").html_safe %>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Time when disruption was no longer detected by the system.">
                           <sup>*</sup>
                    </span>
                </th>
                <th width="100" style="text-align: center;" width="80">Actions</th>
            </tr>
            </thead>
            <tbody>
            <% @disruptions.each do |disruption| %>
                <tr>
                    <td>
                        <%= getLinkToBusRoute(disruption.route, disruption.getRunString).html_safe %>
                    </td>
                    <td style="text-align: center;" sorttable_customkey="<%= disruption.run %>"> <%= image_tag disruption.getRunString.downcase+".png", size: "32", title: disruption.getRunString %></td>
                    <td>
                        <%= getLinkToBusStop(disruption.fromStop).html_safe %>
                    </td>
                    <td>
                        <%= getLinkToBusStop(disruption.toStop).html_safe %>
                    </td>
                    <td class="delayCell <%= disruption.delayColor %>"><%= disruption.getDelay %></td>
                    <td class="delayCell <%= disruption.totalDelayColor %>"><%= disruption.getTotalDelay %></td>
                    </td>
                    <td> <%= disruption.getDetectedAt(true) %></td>
                    <td> <%= disruption.getClearedAt(true) %></td>
                    <td style="text-align: center;">
                        <a  onclick="details(<%=disruption.id%>)">
                        <!--<a href="<= disruption_details_url(id: disruption.id) %>" data-reveal-id="revealModal" data-reveal-ajax="true">-->
                            <%= image_tag "details.png", size: "24", alt: "Show more details", title: "Show more details about disruption" %>
                        </a>
                        <a href="<%= disruption_comments_url(id: disruption.id) %>" data-reveal-id="revealModal" data-reveal-ajax="true">
                            <%= image_tag "comments.png", size: "24", alt: "Show comments", title: "Show comments about disruption" %>
                        </a>
                    </td>
                </tr>
            <% end %>
            </tbody>
        </table>
        <% if @disruptions.total_entries > 20 %>
            <div class="apple_pagination">
                <%= will_paginate @disruptions, :container => false %>
            </div>
        <% end %>
    </div>
</div>