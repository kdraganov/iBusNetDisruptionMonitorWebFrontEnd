<div class="row">
    <div class="large-6 medium-6 small-6 columns">
        <span style="font-size:0.8em;float:left;">
            <%= page_entries_info @disruptions %>
        </span>
    </div>
</div>

<div class="row">
    <div class="large-12 columns">
        <table id="disruptionsTable" class="sortable" width="100%">
            <thead>
            <tr>
                <th width="20">Route</th>
                <th>Direction</th>
                <th>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Stops between which disruption is observed.">From</span>
                </th>
                <th>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Stops between which disruption is observed.">To</span>
                </th>
                <th width="105">
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="WMA (Weighted moving average) delay observed accross the given section.">Delay</span>
                </th>
                <th width="105">
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Total delay observed across the route in minutes.">Total delay</span>
                </th>
                <th>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Time when the system has first detected the disruption.">Detected</span>
                </th>
                <th>
                    <span data-tooltip aria-haspopup="true" class="has-tip" title="Time when disruption was no longer detected by the system.">Cleared</span>
                </th>
                <th class="sorttable_nosort" width="80">Actions</th>
            </tr>
            </thead>
            <tbody>
            <% @disruptions.each do |disruption| %>
                <tr>
                    <td>
                        <%= getLinkToBusRoute(disruption.route, disruption.getRunString).html_safe %>
                    </td>
                    <td style="text-align: center;" sorttable_customkey="<%= disruption.run %>"> <%= image_tag disruption.getRunString.downcase+".png", size: "32", title: disruption.getRunString %></td>
                    <td>
                        <%= getLinkToBusStop(disruption.fromStop).html_safe %>
                    </td>
                    <td>
                        <%= getLinkToBusStop(disruption.toStop).html_safe %>
                    </td>
                    <td class="delayCell <%= disruption.delayColor %>"><%= disruption.getDelay %></td>
                    <td class="delayCell <%= disruption.totalDelayColor %>"><%= disruption.getTotalDelay %></td>
                    </td>
                    <td> <%= disruption.getDetectedAt(true) %></td>
                    <td> <%= disruption.getClearedAt(true) %></td>
                    <td style="text-align: center;">
                        <a  onclick="details(<%=disruption.id%>)">
                        <!--<a href="<= disruption_details_url(id: disruption.id) %>" data-reveal-id="revealModal" data-reveal-ajax="true">-->
                            <%= image_tag "details.png", size: "24", alt: "Show more details", title: "Show more details about disruption" %>
                        </a>
                        <a href="<%= disruption_comments_url(id: disruption.id) %>" data-reveal-id="revealModal" data-reveal-ajax="true">
                            <%= image_tag "comments.png", size: "24", alt: "Show comments", title: "Show comments about disruption" %>
                        </a>
                    </td>
                </tr>
            <% end %>
            </tbody>
        </table>
        <% if @disruptions.total_entries > 20 %>
            <div class="apple_pagination">
                <%= will_paginate @disruptions, :container => false %>
            </div>
        <% end %>
    </div>
</div>